async function c(e){try{await chrome.scripting.insertCSS({target:{tabId:e},files:["assets/main.css"]}),console.log("CSS injected!");const s=await chrome.scripting.executeScript({target:{tabId:e},files:["app.js"]});console.log(s);const i=await t(e,{action:"init"});if(console.log(i),i.status==="opened")return e}catch(s){console.error("Error injecting CSS or executing script:",s)}}async function t(e,s){return new Promise(i=>{chrome.tabs.sendMessage(e,s,o=>i(o))})}const n=new Map;chrome.action.onClicked.addListener(async function(e){if(n.has(e.id))(await t(e.id,{action:"close"})).status==="closed"&&(n.delete(e.id),setTabs.delete(e.id));else if(n.get(e.id))(await t(e.id,{action:"open"})).status==="opened"&&(n.set(e.id,!0),setTabs.add(e.id));else{const s=await c(e.id);n.set(s,!0)}});
