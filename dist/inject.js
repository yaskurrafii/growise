async function o(e){try{const n=await chrome.scripting.executeScript({target:{tabId:e},files:["app.js"]});if(console.log(n),(await t(e,{action:"init"})).status==="opened")return e}catch(n){console.error("Error injecting CSS or executing script:",n)}}async function t(e,n){return new Promise(i=>{chrome.tabs.sendMessage(e,n,c=>i(c))})}const s=new Set;chrome.action.onClicked.addListener(async function(e){s.has(e.id)?t(e.id,{action:"toggle"}):(await o(e.id),s.add(e.id))});chrome.tabs.onUpdated.addListener(async function(e,n,i){n.url===void 0&&s.delete(i.id)});
